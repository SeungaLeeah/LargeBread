{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\"; // 액션함수를 위한 hooks 사용\n\nimport { pending, fulfilled, rejected } from '../Action';\nimport axios from 'axios';\nimport { cloneDeep } from 'lodash';\nconst API_URL = `http://localhost:3001`;\n/* 다중행 데이터 조회를 위한 비동기 함수 */\n\nexport const getList = createAsyncThunk('LargeBreadSlice/getList', async (payload, _ref) => {\n  let {\n    rejectValue\n  } = _ref;\n  let result = null;\n\n  try {\n    result = await axios.get(API_URL);\n  } catch (err) {\n    result = rejectValue(err.response);\n  }\n\n  return result;\n});\n/* 단일행 데이터 조회를 위한 비동기 함수 */\n\nexport const getItem = createAsyncThunk('LargeBreadSlice/getItem', async (payload, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  let result = null;\n\n  try {\n    result = await axios.get(`${API_URL}/product/${payload === null || payload === void 0 ? void 0 : payload.category_id}`);\n  } catch (err) {\n    result = rejectWithValue(err.response);\n  }\n\n  return result;\n});\n/* 데이터 저장을 위한 비동기 함수 */\n\nexport const addCart = createAsyncThunk('LargeBreadSlice/addCart', async (payload, _ref3) => {\n  let {\n    rejectWithValue\n  } = _ref3;\n  let result = null;\n\n  try {\n    result = await axios.post(`${API_URL}/product`, {\n      amount: payload.amount,\n      product_id: payload.product_id\n    });\n  } catch (err) {\n    result = rejectWithValue(err.response);\n  }\n\n  return result;\n});\nconst LargeBreadSlice = createSlice({\n  name: 'LargeBreadSlice',\n  initialState: {\n    data: null,\n    loading: false,\n    error: null\n  },\n  reducers: {},\n  extraReducers: {\n    /* 다중행 데이터 조회를 위한 액션 함수 */\n    [getList.pending]: pending,\n    [getList.fulfilled]: fulfilled,\n    [getList.rejected]: rejected,\n\n    /* 단일행 데이터 조회를 위한 액션 함수 */\n    [getItem.pending]: pending,\n    [getItem.fulfilled]: fulfilled,\n    [getItem.rejected]: rejected,\n\n    /* 데이터 저장을 위한 액션 함수 */\n    [addCart.pending]: pending,\n    [addCart.fulfilled]: (state, _ref4) => {\n      let {\n        meta,\n        payload\n      } = _ref4;\n      const data = cloneDeep(state.data);\n      console.log(data);\n      data.item.unshift(payload.data.item);\n      data.item.pop();\n      return {\n        data: data,\n        loading: false,\n        error: null\n      };\n    },\n    [addCart.rejected]: rejected\n  }\n});\nexport default LargeBreadSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","pending","fulfilled","rejected","axios","cloneDeep","API_URL","getList","payload","rejectValue","result","get","err","response","getItem","rejectWithValue","category_id","addCart","post","amount","product_id","LargeBreadSlice","name","initialState","data","loading","error","reducers","extraReducers","state","meta","console","log","item","unshift","pop","reducer"],"sources":["C:/Users/leeah/LargeBread/src/slices/LargeBreadSlice.jsx"],"sourcesContent":["import {createSlice, createAsyncThunk} from \"@reduxjs/toolkit\"\r\n// 액션함수를 위한 hooks 사용\r\nimport {pending, fulfilled, rejected} from '../Action';\r\nimport axios from 'axios';\r\nimport {cloneDeep} from 'lodash';\r\n\r\nconst API_URL = `http://localhost:3001`\r\n\r\n/* 다중행 데이터 조회를 위한 비동기 함수 */\r\nexport const getList = createAsyncThunk('LargeBreadSlice/getList', async(payload,{rejectValue})=>{\r\n  let result = null;\r\n  \r\n  try {\r\n    result = await axios.get(API_URL);\r\n  }catch(err){\r\n    result = rejectValue(err.response);\r\n  }\r\n  return result;\r\n});\r\n\r\n/* 단일행 데이터 조회를 위한 비동기 함수 */\r\nexport const getItem  = createAsyncThunk('LargeBreadSlice/getItem', async(payload, {rejectWithValue})=>{\r\n  let result = null;\r\n\r\n  try{\r\n    result= await axios.get(`${API_URL}/product/${payload?.category_id}`);\r\n  }catch(err){\r\n    result = rejectWithValue(err.response);\r\n  }\r\n  return result;\r\n});\r\n\r\n/* 데이터 저장을 위한 비동기 함수 */\r\nexport const addCart = createAsyncThunk('LargeBreadSlice/addCart', async(payload, { rejectWithValue})=>{\r\n  let result = null;\r\n  \r\n  try{\r\n      result = await axios.post(`${API_URL}/product`,{\r\n          amount: payload.amount,\r\n          product_id: payload.product_id\r\n    })\r\n  }catch(err){\r\n    result = rejectWithValue(err.response);\r\n  }\r\n  return result;\r\n});\r\n\r\nconst LargeBreadSlice = createSlice({\r\n  name: 'LargeBreadSlice',\r\n  initialState: {\r\n    data: null,       \r\n    loading: false, \r\n    error:null        \r\n  },\r\n  reducers: {},\r\n  extraReducers: {\r\n\r\n  /* 다중행 데이터 조회를 위한 액션 함수 */\r\n  [getList.pending]: pending,\r\n  [getList.fulfilled]: fulfilled,\r\n  [getList.rejected]: rejected,\r\n\r\n  /* 단일행 데이터 조회를 위한 액션 함수 */\r\n  [getItem.pending]: pending,\r\n  [getItem.fulfilled]: fulfilled,\r\n  [getItem.rejected]: rejected,\r\n\r\n  /* 데이터 저장을 위한 액션 함수 */\r\n  [addCart.pending]: pending,\r\n  [addCart.fulfilled]: (state,{meta,payload})=>{\r\n      const data = cloneDeep(state.data);\r\n      console.log(data);\r\n      data.item.unshift(payload.data.item);\r\n      data.item.pop();\r\n      return{\r\n          data: data,\r\n          loading: false,\r\n          error: null\r\n      }\r\n  },\r\n  [addCart.rejected]: rejected,\r\n\r\n\r\n  },\r\n});\r\n\r\nexport default LargeBreadSlice.reducer;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}